//file:noinspection GroovyAssignabilityCheck
/**
 * Author: ngoanh2n
 * @see <a href="https://docs.gradle.org/current/userguide/java_testing.html">Testing in Java & JVM projects</a>
 */
reporting {
    baseDir = getLayout().getBuildDirectory().getLocationOnly().get().file("reports")
}
testResultsDirName = reporting.baseDir

test {
    useJUnitPlatform()
    setIgnoreFailures(true)
    getOutputs().upToDateWhen { false }

    reports {
        getJunitXml().configure {
            mergeReruns = false
            outputPerTestCase = false
        }
    }

    testLogging {
        setShowStandardStreams(true)
        events("passed", "skipped", "failed")
    }

    systemProperty("file.encoding", "UTF-8")
    systemProperty("junit.jupiter.extensions.autodetection.enabled", "true")

    getSystemProperties().putAll(System.getProperties() as Map<?, ?>)
    getSystemProperties().put("user.dir", projectDir.getAbsolutePath())
}
